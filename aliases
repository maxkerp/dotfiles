# Unix
alias dirs="ls -1d */"
alias e="$EDITOR"
alias files="ls -p | grep -v /"
alias gopen='gnome-open'
alias ls='exa --group-directories-first -F'
alias l='ls -1'
alias la='ls -la'
alias ll="l"
alias ln="ln -v"
alias mkdir="mkdir -p"
alias v="$VISUAL"
alias vi="nvim"
alias ".."="source ~/.zshrc"

# Pretty print the path
alias path='echo $PATH | tr -s ":" "\n"'

# Git
alias dh='git diff HEAD'
alias s='git status -s'
alias staged='git diff --staged'
alias unstaged='git diff'
alias u='git add -u'

#FZF Magic
alias aptinfo='apt list --installed | fzf | cut -d'/' -f1 | xargs apt show'
alias br='git branch | grep -v '^\*' | fzf --reverse --height=40% | xargs git checkout'
alias tldrs='tldr -l | tr -s ", " "\n" | fzf --reverse --preview="tldr {}" --preview-window 70%'

# Bundler
alias b="bundle"

# Rails
alias migrate="rake db:migrate db:rollback && rake db:migrate db:test:prepare"

# RSpec
# Requires config.example_status_persistence_file_path to be set.
alias f='rspec --only-failures'
alias n='rspec --next'

# Modified ruby files compared to MASTER (all modified files)
alias modified_app_files='git diff --diff-filter=AM --name-status master..HEAD | grep .rb | cut -c 3- | paste -sd " "'

# Modified spec files compared to MASTER (all modified specs)
alias modified_spec_files='git diff --diff-filter=AM --name-status master..HEAD | grep _spec.rb | cut -c 3- | paste -sd " "'
#
# Modified ruby files on CURRENT BRANCH (current modified files)
alias current_modified_files='git diff --diff-filter=AM --name-status HEAD | grep .rb | cut -c 3- | paste -sd " "'

# Modified spec files on CURRENT BRANCH (current modified specs)
alias current_modified_specs='git diff --diff-filter=AM --name-status HEAD | grep _spec.rb | cut -c 3- | paste -sd " "'

alias lint_current_modified_files='bundle exec rubocop $(current_modified_files)'
alias lint_current_modified_specs='bundle exec rubocop $(current_modified_specs)'

alias run_current_modified_specs='bundle exec rspec $(current_modified_specs)'
alias changed_specs='run_current_modified_specs'

function aptexplore(){
  apt search $1 2> /dev/null | \
  grep -v -e "^ " | \
  grep -v -e "^$" | \
  cut -d"/" -f1 | \
  fzf --reverse --preview="apt show 2> /dev/null {}" --preview-window=60%
}

function manexplore(){
  apropos $1 | fzf --reverse | cut -d' ' -f1 | xargs man
}
